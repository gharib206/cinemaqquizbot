<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-theme-bg: var(--tg-theme-bg-color, #ffffff);
            --tg-theme-text: var(--tg-theme-text-color, #222222);
            --tg-theme-btn: var(--tg-theme-button-color, #248bed);
            --tg-theme-btn-text: var(--tg-theme-button-text-color, #ffffff);
            --tg-theme-sec-bg: var(--tg-theme-secondary-bg-color, #f4f4f5);
            --color-correct: #31b545;
            --color-wrong: #f54242;
        }
        body { background-color: var(--tg-theme-bg); color: var(--tg-theme-text); font-family: sans-serif; margin: 0; padding: 20px; text-align: center; overflow-x: hidden; }
        
        /* Ø§Ø³ØªØ§ÛŒÙ„ Ù†ÙˆØ§Ø± ÙˆØ¶Ø¹ÛŒØª */
        .progress-container { width: 100%; background: var(--tg-theme-sec-bg); height: 8px; border-radius: 4px; margin-bottom: 20px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--tg-theme-btn); width: 0%; transition: width 0.3s ease; }

        .card { background: var(--tg-theme-sec-bg); padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-top: 10px; }
        
        .option-btn { display: block; width: 100%; padding: 14px; margin: 10px 0; border: none; border-radius: 12px; background: var(--tg-theme-bg); color: var(--tg-theme-text); border: 1px solid rgba(0,0,0,0.1); cursor: pointer; font-size: 16px; transition: all 0.2s ease; font-weight: 500; }
        
        /* Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¬ÙˆØ§Ø¨ */
        .correct { background-color: var(--color-correct) !important; color: white !important; border-color: var(--color-correct) !important; }
        .wrong { background-color: var(--color-wrong) !important; color: white !important; border-color: var(--color-wrong) !important; }
        
        .progress-text { font-size: 14px; color: var(--tg-theme-text); opacity: 0.6; margin-bottom: 5px; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="quiz-container">
        <div class="progress-text">Ù…Ø±Ø­Ù„Ù‡ <span id="level-num">Û±</span> - Ø³ÙˆØ§Ù„ <span id="q-num">Û±</span> Ø§Ø² Û±Û°</div>
        <div class="progress-container">
            <div id="p-bar" class="progress-bar"></div>
        </div>
        
        <div class="card">
            <h3 id="question-text" style="margin-top: 0;">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</h3>
            <div id="options-container"></div>
        </div>
    </div>

    <div id="result-container" class="hidden">
        <div class="card">
            <h2 id="result-title">Ù¾Ø§ÛŒØ§Ù† Ù…Ø±Ø­Ù„Ù‡!</h2>
            <p id="result-text" style="font-size: 18px;"></p>
            <button class="option-btn" id="next-level-btn" style="background: var(--tg-theme-btn); color: white;" onclick="startLevel2()">Ø´Ø±ÙˆØ¹ Ù…Ø±Ø­Ù„Ù‡ Ø¯ÙˆÙ…</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const questionsLevel1 = [
            { q: "Ø§ÙˆÙ„ÛŒÙ† Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ù„Ù†Ø¯ ØªØ§Ø±ÛŒØ®ØŸ", options: ["Ù¾ÛŒÙ†ÙˆÚ©ÛŒÙˆ", "Ø³ÙÛŒØ¯Ø¨Ø±ÙÛŒ", "ÙØ§Ù†ØªØ²ÛŒØ§", "Ø¨Ø§Ù…Ø¨ÛŒ"], correct: 1 },
            { q: "Ú©Ø§Ø±Ú¯Ø±Ø¯Ø§Ù† ÙÙ‡Ø±Ø³Øª Ø´ÛŒÙ†Ø¯Ù„Ø± Ú©ÛŒØ³ØªØŸ", options: ["Ù†ÙˆÙ„Ø§Ù†", "Ø§Ø³Ú©ÙˆØ±Ø³ÛŒØ²ÛŒ", "Ø§Ø³Ù¾ÛŒÙ„Ø¨Ø±Ú¯", "Ú©Ø§Ù…Ø±ÙˆÙ†"], correct: 2 },
            { q: "Ø¬Ú© Ø¯Ø± ØªØ§ÛŒØªØ§Ù†ÛŒÚ© Ø¨Ù„ÛŒØ· Ø±Ø§ Ø¯Ø± Ú†Ù‡ Ø¨Ø§Ø²ÛŒ Ø¨Ø±Ø¯ØŸ", options: ["ØªØ®ØªÙ‡ Ù†Ø±Ø¯", "Ù¾ÙˆÚ©Ø±", "Ø´Ø·Ø±Ù†Ø¬", "Ø­Ú©Ù…"], correct: 1 },
            { q: "Ø¨Ø²Ø±Ú¯ØªØ±ÛŒÙ† Ø¬Ø§ÛŒØ²Ù‡ Ø¬Ø´Ù†ÙˆØ§Ø±Ù‡ Ú©Ù†ØŸ", options: ["Ø´ÛŒØ± Ø·Ù„Ø§ÛŒÛŒ", "Ø®Ø±Ø³ Ø·Ù„Ø§ÛŒÛŒ", "Ù†Ø®Ù„ Ø·Ù„Ø§", "Ø§Ø³Ú©Ø§Ø±"], correct: 2 },
            { q: "Ø¨Ø§Ø²ÛŒÚ¯Ø± Ø¬ÙˆÚ©Ø± Ø¯Ø± Ø´ÙˆØ§Ù„ÛŒÙ‡ ØªØ§Ø±ÛŒÚ©ÛŒØŸ", options: ["Ù‡ÛŒØª Ù„Ø¬Ø±", "ÙˆØ§Ú©ÛŒÙ† ÙÛŒÙ†ÛŒÚ©Ø³", "Ø¬Ú© Ù†ÛŒÚ©Ù„Ø³ÙˆÙ†", "Ø¬Ø±Ø¯ Ù„ØªÙˆ"], correct: 0 },
            { q: "Ø§Ø³Ù… Ø±Ù…Ø² Ù†Ù‚Ø´Ù‡ Ù‡Ø±ÛŒ Ù¾Ø§ØªØ±ØŸ", options: ["Ù†Ù‚Ø´Ù‡ ØºØ§Ø±ØªÚ¯Ø±", "Ø¢Ù„ÙˆÙ‡ÙˆÙ…ÙˆØ±Ø§", "Ø³ÙˆÚ¯Ù†Ø¯ Ù…ÛŒâ€ŒØ®ÙˆØ±Ù… Ú©Ø§Ø± Ø¨Ø¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù…", "Ø§Ú©Ø³Ù¾Ú©ØªÙˆ"], correct: 2 },
            { q: "Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø±Ù†Ø¯Ù‡ Ø§Ø³Ú©Ø§Ø± Ø¨Ù‡ØªØ±ÛŒÙ† ÙÛŒÙ„Ù… (Û±Û¹Û²Û¹)ØŸ", options: ["Ø¨Ø§Ù„â€ŒÙ‡Ø§", "Ø·Ù„ÙˆØ¹", "Ù…ØªØ±ÙˆÙ¾ÙˆÙ„ÛŒØ³", "Ø®ÙˆØ§Ù†Ù†Ø¯Ù‡ Ø¬Ø§Ø²"], correct: 0 },
            { q: "ÙØ§Ø±Ø³Øª Ú¯Ø§Ù…Ù¾ Ú†Ù‡ Ú†ÛŒØ²ÛŒ ØªØ¹Ø§Ø±Ù Ù…ÛŒâ€ŒÚ©Ø±Ø¯ØŸ", options: ["Ø³ÛŒØ¨", "Ø³Ø§Ù†Ø¯ÙˆÛŒÚ† Ù…ÛŒÚ¯Ùˆ", "Ø´Ú©Ù„Ø§Øª", "Ù†ÙˆØ´Ø§Ø¨Ù‡"], correct: 2 },
            { q: "ØªÙˆØªÙ… Ù„Ø¦ÙˆÙ†Ø§Ø±Ø¯Ùˆ Ø¯ÛŒâ€ŒÚ©Ø§Ù¾Ø±ÛŒÙˆ Ø¯Ø± ØªÙ„Ù‚ÛŒÙ†ØŸ", options: ["Ø³Ø§Ø¹Øª", "Ø³Ú©Ù‡", "ÙØ±ÙØ±Ù‡", "ØªØ§Ø³"], correct: 2 },
            { q: "Ø·ÙˆÙ„Ø§Ù†ÛŒâ€ŒØªØ±ÛŒÙ† ÙÛŒÙ„Ù… Ø¨Ø±Ù†Ø¯Ù‡ Ø§Ø³Ú©Ø§Ø±ØŸ", options: ["Ø¨Ù† Ù‡ÙˆØ±", "Ø¨Ø±Ø¨Ø§Ø¯Ø±ÙØªÙ‡", "Ù¾Ø¯Ø±Ø®ÙˆØ§Ù†Ø¯Ù‡ Û²", "ØªØ§ÛŒØªØ§Ù†ÛŒÚ©"], correct: 1 }
        ];

        const questionsLevel2 = [
            { q: "Ø§ÙˆÙ„ÛŒÙ† ÙÛŒÙ„Ù… Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¨Ø±Ù†Ø¯Ù‡ Ø§Ø³Ú©Ø§Ø±ØŸ", options: ["Ø¨Ú†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ø³Ù…Ø§Ù†", "ÙØ±ÙˆØ´Ù†Ø¯Ù‡", "Ø¬Ø¯Ø§ÛŒÛŒ Ù†Ø§Ø¯Ø± Ø§Ø² Ø³ÛŒÙ…ÛŒÙ†", "Ø·Ø¹Ù… Ú¯ÛŒÙ„Ø§Ø³"], correct: 2 },
            { q: "Ø¯ÙˆÙ† ÙˆÛŒØªÙˆ Ú©ÙˆØ±Ù„Ø¦ÙˆÙ†Ù‡ Ù‡Ù†Ú¯Ø§Ù… Ù…Ø±Ú¯ Ú†Ù‡ Ù…ÛŒâ€ŒÚ©Ø±Ø¯ØŸ", options: ["Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ù†ÙˆÙ‡â€ŒØ§Ø´", "Ø§Ù…Ø¶Ø§ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯", "ØµØ­Ø¨Øª Ø¨Ø§ Ù…Ø§ÛŒÚ©Ù„", "Ø®ÙˆØ±Ø¯Ù† Ø´Ø§Ù…"], correct: 0 },
            { q: "Ú©Ø§Ø±Ú¯Ø±Ø¯Ø§Ù† Â«Û²Û°Û°Û±: ÛŒÚ© Ø§ÙˆØ¯ÛŒØ³Ù‡ ÙØ¶Ø§ÛŒÛŒÂ»ØŸ", options: ["Ù†ÙˆÙ„Ø§Ù†", "Ø§Ø³ØªÙ†Ù„ÛŒ Ú©ÙˆØ¨Ø±ÛŒÚ©", "ØªØ§Ø±Ú©ÙˆÙØ³Ú©ÛŒ", "Ø§Ø³Ù¾ÛŒÙ„Ø¨Ø±Ú¯"], correct: 1 },
            { q: "Ø±Ú©ÙˆØ±Ø¯Ø¯Ø§Ø± Ø§Ø³Ú©Ø§Ø± Ø¨Ø§Ø²ÛŒÚ¯Ø±ÛŒ Ø²Ù†ØŸ", options: ["Ù…Ø±ÛŒÙ„ Ø§Ø³ØªØ±ÛŒÙ¾", "Ø§ÛŒÙ†Ú¯Ø±ÛŒØ¯ Ø¨Ø±Ú¯Ù…Ù†", "Ú©Ø§ØªØ±ÛŒÙ† Ù‡Ù¾Ø¨ÙˆØ±Ù†", "ÙØ±Ø§Ù†Ø³ÛŒØ³ Ù…Ú©â€ŒØ¯ÙˆØ±Ù…Ù†Ø¯"], correct: 2 },
            { q: "Ø³Ù„Ø§Ø­ Ø¬Ú© ØªÙˆØ±Ù†Ø³ Ø¯Ø± ÙÛŒÙ„Ù… Ø¯Ø±Ø®Ø´Ø´ØŸ", options: ["Ú†Ø§Ù‚Ùˆ", "ØªØ¨Ø±", "Ø§Ø³Ù„Ø­Ù‡", "Ø§Ø±Ù‡ Ø¨Ø±Ù‚ÛŒ"], correct: 1 },
            { q: "Ø§ÙˆÙ„ÛŒÙ† ÙÛŒÙ„Ù… Ø¯Ù†ÛŒØ§ÛŒ Ø³ÛŒÙ†Ù…Ø§ÛŒÛŒ Ù…Ø§Ø±ÙˆÙ„ØŸ", options: ["Ú©Ø§Ù¾ÛŒØªØ§Ù† Ø¢Ù…Ø±ÛŒÚ©Ø§", "Ù‡Ø§Ù„Ú©", "Ù…Ø±Ø¯ Ø¢Ù‡Ù†ÛŒ", "Ø§Ù†ØªÙ‚Ø§Ù…â€ŒØ¬ÙˆÛŒØ§Ù†"], correct: 2 },
            { q: "Ø¨Ø±Ù†Ø¯Ù‡ Ø§Ø³Ú©Ø§Ø± Ø¨Ù‡ØªØ±ÛŒÙ† ÙÛŒÙ„Ù… Û²Û°Û²Û° Ø§Ø² Ú©Ø±Ù‡ Ø¬Ù†ÙˆØ¨ÛŒØŸ", options: ["Ø§Ù†Ú¯Ù„", "Ù‚Ø·Ø§Ø± Ø¨ÙˆØ³Ø§Ù†", "Ù¾ÛŒØ±Ù¾Ø³Ø±", "Ù…ÛŒÙ†Ø§Ø±ÛŒ"], correct: 0 },
            { q: "Ú©Ø§Ø±Ú¯Ø±Ø¯Ø§Ù† ÙÛŒÙ„Ù… Â«Ø±ÙˆØ§Ù†ÛŒÂ» (Psycho)ØŸ", options: ["Ø§ÙˆØ±Ø³Ù† ÙˆÙ„Ø²", "Ø¢Ù„ÙØ±Ø¯ Ù‡ÛŒÚ†Ú©Ø§Ú©", "Ø¨ÛŒÙ„ÛŒ ÙˆØ§ÛŒÙ„Ø¯Ø±", "ØªØ±ÙˆÙÙˆ"], correct: 1 },
            { q: "Ø¯Ø± Ù…Ø§ØªØ±ÛŒÚ©Ø³ØŒ Ù†Ø¦Ùˆ Ú©Ø¯Ø§Ù… Ù‚Ø±Øµ Ø±Ø§ Ø®ÙˆØ±Ø¯ØŸ", options: ["Ù‚Ø±Øµ Ø¢Ø¨ÛŒ", "Ù‚Ø±Øµ Ø³Ø¨Ø²", "Ù‚Ø±Øµ Ù‚Ø±Ù…Ø²", "Ù‚Ø±Øµ Ø²Ø±Ø¯"], correct: 2 },
            { q: "Ø­Ù„Ù‚Ù‡ ÛŒÚ¯Ø§Ù†Ù‡ Ú©Ø¬Ø§ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯ØŸ", options: ["Ø´Ø§ÛŒØ±", "Ø±ÛŒÙˆÙ†Ø¯Ù„", "Ú©ÙˆÙ‡ Ù†Ø§Ø¨ÙˆØ¯ÛŒ", "Ú¯Ø§Ù†Ø¯ÙˆØ±"], correct: 2 }
        ];

        let currentLevel = 1;
        let currentQuestionIndex = 0;
        let score = 0;

        function loadQuestion() {
            const questions = currentLevel === 1 ? questionsLevel1 : questionsLevel2;
            const q = questions[currentQuestionIndex];
            
            // Ø¢Ù¾Ø¯ÛŒØª Ù†ÙˆØ§Ø± ÙˆØ¶Ø¹ÛŒØª
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            document.getElementById("p-bar").style.width = progress + "%";
            
            document.getElementById("level-num").innerText = currentLevel;
            document.getElementById("q-num").innerText = currentQuestionIndex + 1;
            document.getElementById("question-text").innerText = q.q;
            
            const optionsDiv = document.getElementById("options-container");
            optionsDiv.innerHTML = "";
            
            q.options.forEach((opt, index) => {
                const btn = document.createElement("button");
                btn.className = "option-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(index, btn);
                optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btn) {
            const questions = currentLevel === 1 ? questionsLevel1 : questionsLevel2;
            const correctIndex = questions[currentQuestionIndex].correct;
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ù„ÛŒÚ© Ù…Ø¬Ø¯Ø¯
            const allButtons = document.querySelectorAll('.option-btn');
            allButtons.forEach(b => b.onclick = null);

            if (selectedIndex === correctIndex) {
                // Ø¬ÙˆØ§Ø¨ Ø¯Ø±Ø³Øª
                btn.classList.add("correct");
                score++;
                tg.HapticFeedback.notificationOccurred('success');
            } else {
                // Ø¬ÙˆØ§Ø¨ ØºÙ„Ø·
                btn.classList.add("wrong");
                allButtons[correctIndex].classList.add("correct"); // Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ø¬ÙˆØ§Ø¨ Ø¯Ø±Ø³Øª
                tg.HapticFeedback.notificationOccurred('error');
            }

            // ÛŒÚ© Ø«Ø§Ù†ÛŒÙ‡ Ù…Ú©Ø« Ùˆ Ø³Ù¾Ø³ Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < questions.length) {
                    loadQuestion();
                } else {
                    document.getElementById("p-bar").style.width = "100%";
                    showResults();
                }
            }, 1000);
        }

        function showResults() {
            document.getElementById("quiz-container").classList.add("hidden");
            document.getElementById("result-container").classList.remove("hidden");
            
            let resultMessage = "";
            if (score >= 7) resultMessage = "Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯! Ù‚Ù‡Ø±Ù…Ø§Ù† Ø³ÛŒÙ†Ù…Ø§ Ù‡Ø³ØªÛŒ! ğŸ†";
            else if (score >= 4) resultMessage = "Ø®ÙˆØ¨ Ø¨ÙˆØ¯ØŒ Ø§Ù…Ø§ Ø¬Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØª Ø¯Ø§Ø±ÛŒ. ğŸ¬";
            else resultMessage = "Ø¨Ø§ÛŒØ¯ ÙÛŒÙ„Ù…â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒ Ø¨Ø¨ÛŒÙ†ÛŒ! ğŸ¿";

            document.getElementById("result-text").innerHTML = `${resultMessage}<br>Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§: ${score} Ø§Ø² Û±Û°`;

            if (currentLevel === 1) {
                document.getElementById("next-level-btn").innerText = "Ø±ÙØªÙ† Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ø¯ÙˆÙ…";
                document.getElementById("next-level-btn").onclick = startLevel2;
            } else {
                document.getElementById("next-level-btn").innerText = "Ø§Ø±Ø³Ø§Ù„ Ù†ØªØ§ÛŒØ¬ Ù†Ù‡Ø§ÛŒÛŒ";
                document.getElementById("next-level-btn").onclick = sendResults;
            }
        }

        function startLevel2() {
            currentLevel = 2;
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById("quiz-container").classList.remove("hidden");
            document.getElementById("result-container").classList.add("hidden");
            loadQuestion();
        }

           function sendResults() {
    tg.sendData("Ø§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ Ù…Ù†: " + score + " Ø§Ø² 10");
}

        loadQuestion();
    </script>
</body>
</html>




